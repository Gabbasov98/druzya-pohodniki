let burger = document.querySelector(".burger")
let body = document.querySelector("body")
let header = document.querySelector(".header")
let menuClose = document.querySelector(".m-menu__close")


if (burger) {
    burger.onclick = function() {
        header.classList.toggle("_open")
        body.classList.toggle("fixed-body")
    }
}

if(menuClose){
    menuClose.onclick = function () {
        closeMenu()
    }
}

function closeMenu(){
    header.classList.remove("_open")
    body.classList.remove("fixed-body")
}


let favouriteButtons = document.querySelectorAll(".favourite-btn")

favouriteButtons.forEach(btn => {
    btn.onclick = function(){
        this.classList.toggle("_active")
    }
})

function Sliders() {
    let SlidersArray = []

    let sliders = document.querySelectorAll(".slider")
    sliders.forEach((slider,index) => {
        slider.setAttribute("data-slider-id",index)

        SlidersArray[index] = new Swiper(`.slider[data-slider-id="${index}"] .swiper-container`, {
            slidesPerView: "auto",
            spaceBetween: 0,
            watchSlidesProgress: true,
            preventClicks :true,
            a11y: false,
            observer: true,
            observeParents: true,
            observeSlideChildren: true,
            navigation: {
                nextEl: `.slider[data-slider-id="${index}"] .swiper-button-next`,
                prevEl: `.slider[data-slider-id="${index}"] .swiper-button-prev`,
            },
            pagination: {
                el: `.slider[data-slider-id="${index}"] .swiper-pagination`,
                type: 'bullets',
                clickable: true,
            },
        })
    })
}

Sliders()

let tourNav = document.querySelector(".tour-nav")

setFixedTourNav()
window.onscroll = function (e) {
    setFixedTourNav()
};


function setFixedTourNav() {
    if(!tourNav){
        return
    }
    let tourNavHeight = tourNav.getBoundingClientRect().height
    let st = window.scrollY;
    if(st > tourNavHeight * 2){
        tourNav.classList.add("_fixed")
    } else{
        tourNav.classList.remove("_fixed")
    }
}


let tourDesc = document.querySelectorAll("._tour-desc")
tourDesc.forEach(tourDescItem => {
    let toggle = tourDescItem.querySelector("._tour-desc__btn")
    toggle.onclick = function () {
        tourDescItem.classList.add("_show-all")
    }
})




function cartCalc() {
    let calcs = document.querySelectorAll(".cartcalc")

    calcs.forEach(calc => {
        let calcMinus = calc.querySelector(".ccalc-minus")
        let calcPlus = calc.querySelector(".ccalc-plus")
        let input = calc.querySelector("input")
        setDisabled()

        calcMinus.onclick = function() {
            let a = input.value;
            setDisabled()
            if (a > 1) {
                let b = +a - 1;
                input.value = b;
            } else {
                input.value = a;
            }

            if(+a < 3){
                calcMinus.classList.add("_disabled")
            }
        }

        calcPlus.onclick = function() {
            let a = input.value;
            let b = +a + 1;
            input.value = b;
            calcMinus.classList.remove("_disabled")
        }

        function setDisabled() {


        }
    })


}

cartCalc()

const sections = document.querySelectorAll("._anchor");
window.addEventListener("scroll", navHighlighter);

function navHighlighter() {

    let scrollY = window.pageYOffset;

    sections.forEach(current => {
        const sectionHeight = current.offsetHeight;
        const sectionTop = current.offsetTop - 200;
        let sectionId = current.querySelector("._anchor__item").getAttribute("id");

        if (
            scrollY > sectionTop &&
            scrollY <= sectionTop + sectionHeight
        ){
            document.querySelector(".tour-nav a[href*=" + sectionId + "]").classList.add("_active");
        } else {
            document.querySelector(".tour-nav a[href*=" + sectionId + "]").classList.remove("_active");
        }
    });
}

let toggleBlocks = document.querySelectorAll(".slideToggle-block")
toggleBlocks.forEach((el, i) => {
    el.setAttribute("data-id", i + 1)
    let toggleElement = el.querySelector(`.slideToggle-block__show`)
    let animatedBlock = el.querySelector(`.slideToggle-block__hidden`)
    let contentBlock = el.querySelector(`.slideToggle-block__wrap`)
    let contentBlockHeight = contentBlock.getBoundingClientRect().height
    toggleElement.onclick = function() {
        if (el.classList.contains("slideToggle-block--active")) {
            el.classList.remove("slideToggle-block--active")
            animatedBlock.style.height = `0px`
        } else {
            el.classList.add("slideToggle-block--active")
            animatedBlock.style.height = `${contentBlockHeight}px`
            setToggleBlocksHeight()
        }

    }
});

setToggleBlocksHeight()
window.onresize = function() {
    setToggleBlocksHeight()
}

function setToggleBlocksHeight() {
    if(toggleBlocks.length===0){
        return
    }
    let activeToggleBlocks = document.querySelectorAll(".slideToggle-block--active")

    activeToggleBlocks.forEach(el => {
        let animatedBlock = el.querySelector(`.slideToggle-block__hidden`)
        let contentBlock = el.querySelector(`.slideToggle-block__wrap`)
        let contentBlockHeight = contentBlock.getBoundingClientRect().height
        animatedBlock.style.height = `${contentBlockHeight}px`
    });
}

window.addEventListener('DOMContentLoaded', () => {
    fix100vh();
    window.addEventListener('resize', () => {
        fix100vh();
        // setFixedHeader()
        // getScrollBarSize()
    })

    // setFixedHeader()
    // getScrollBarSize()


    new AirDatepicker('._date-picker', {
        locale: {
            days: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'],
            daysShort: ['Вос', 'Пон', 'Вто', 'Сре', 'Чет', 'Пят', 'Суб'],
            daysMin: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'],
            months: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],
            monthsShort: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],
            today: 'Сегодня',
            clear: 'Очистить',
            dateFormat: 'dd/MM/yyyy',
            timeFormat: 'HH:mm',
            firstDay: 1
        },
        autoClose: true,
        startDate: new Date(),
        // selectedDates: [new Date()],
        // inline: true,
        mobile: true,
    })
})

function fix100vh() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}

//# sourceMappingURL=../sourcemaps/main.min.js.map
